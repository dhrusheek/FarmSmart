/**
 * Agricultural Vocabulary Dictionary
 * Comprehensive list of agricultural terms in multiple Indian languages
 * Used for voice recognition and fuzzy matching
 */

export const agriculturalVocabulary = {
    // Crops (100+ terms)
    crops: {
        en: [
            'wheat', 'rice', 'paddy', 'maize', 'corn', 'cotton', 'sugarcane', 'jute',
            'barley', 'millet', 'sorghum', 'bajra', 'jowar', 'ragi', 'finger millet',
            'pulses', 'lentils', 'chickpea', 'gram', 'pigeon pea', 'arhar', 'tur',
            'black gram', 'urad', 'green gram', 'moong', 'soybean', 'groundnut', 'peanut',
            'mustard', 'rapeseed', 'sunflower', 'safflower', 'sesame', 'til',
            'potato', 'tomato', 'onion', 'garlic', 'ginger', 'turmeric', 'chilli', 'pepper',
            'cabbage', 'cauliflower', 'brinjal', 'eggplant', 'okra', 'lady finger', 'bhindi',
            'carrot', 'radish', 'beetroot', 'pumpkin', 'cucumber', 'bitter gourd', 'bottle gourd',
            'mango', 'banana', 'papaya', 'guava', 'orange', 'lemon', 'lime', 'pomegranate',
            'grapes', 'apple', 'coconut', 'areca nut', 'betel nut', 'cashew',
            'tea', 'coffee', 'rubber', 'tobacco', 'cardamom', 'black pepper', 'clove', 'cinnamon'
        ],
        hi: [
            'गेहूं', 'चावल', 'धान', 'मक्का', 'कपास', 'गन्ना', 'जूट', 'जौ',
            'बाजरा', 'ज्वार', 'रागी', 'दाल', 'मसूर', 'चना', 'अरहर', 'तुर',
            'उड़द', 'मूंग', 'सोयाबीन', 'मूंगफली', 'सरसों', 'सूरजमुखी', 'तिल',
            'आलू', 'टमाटर', 'प्याज', 'लहसुन', 'अदरक', 'हल्दी', 'मिर्च',
            'पत्तागोभी', 'फूलगोभी', 'बैंगन', 'भिंडी', 'गाजर', 'मूली', 'चुकंदर',
            'आम', 'केला', 'पपीता', 'अमरूद', 'संतरा', 'नींबू', 'अनार', 'अंगूर'
        ],
        ta: [
            'கோதுமை', 'அரிசி', 'நெல்', 'சோளம்', 'பருத்தி', 'கரும்பு', 'சணல்',
            'பருப்பு', 'கடலை', 'துவரை', 'உளுந்து', 'பயறு', 'சோயா', 'கடலை',
            'கடுகு', 'சூரியகாந்தி', 'எள்', 'உருளைக்கிழங்கு', 'தக்காளி', 'வெங்காயம்',
            'பூண்டு', 'இஞ்சி', 'மஞ்சள்', 'மிளகாய்', 'முட்டைகோஸ்', 'காலிஃப்ளவர்',
            'கத்தரிக்காய்', 'வெண்டைக்காய்', 'கேரட்', 'முள்ளங்கி', 'பீட்ரூட்',
            'மாம்பழம்', 'வாழைப்பழம்', 'பப்பாளி', 'கொய்யா', 'ஆரஞ்சு', 'எலுமிச்சை'
        ],
        ml: [
            'ഗോതമ്പ്', 'അരി', 'നെല്ല്', 'ചോളം', 'പരുത്തി', 'കരിമ്പ്', 'ചണം',
            'പയർ', 'കടല', 'തുവര', 'ഉഴുന്ന്', 'ചെറുപയർ', 'സോയാബീൻ', 'നിലക്കടല',
            'കടുക്', 'സൂര്യകാന്തി', 'എള്ള്', 'ഉരുളക്കിഴങ്ങ്', 'തക്കാളി', 'ഉള്ളി',
            'വെളുത്തുള്ളി', 'ഇഞ്ചി', 'മഞ്ഞൾ', 'മുളക്', 'കാബേജ്', 'കോളിഫ്ലവർ',
            'വഴുതന', 'വെണ്ട', 'കാരറ്റ്', 'മുള്ളങ്കി', 'ബീറ്റ്റൂട്ട്',
            'മാമ്പഴം', 'വാഴപ്പഴം', 'പപ്പായ', 'പേരക്ക', 'ഓറഞ്ച്', 'നാരങ്ങ'
        ],
        kn: [
            'ಗೋಧಿ', 'ಅಕ್ಕಿ', 'ಭತ್ತ', 'ಜೋಳ', 'ಹತ್ತಿ', 'ಕಬ್ಬು', 'ಸೆಣಬು',
            'ದಾಲ್', 'ಕಡಲೆ', 'ತೊಗರಿ', 'ಉದ್ದು', 'ಹೆಸರು', 'ಸೋಯಾ', 'ಶೇಂಗಾ',
            'ಸಾಸಿವೆ', 'ಸೂರ್ಯಕಾಂತಿ', 'ಎಳ್ಳು', 'ಆಲೂಗಡ್ಡೆ', 'ಟೊಮೇಟೊ', 'ಈರುಳ್ಳಿ',
            'ಬೆಳ್ಳುಳ್ಳಿ', 'ಶುಂಠಿ', 'ಅರಿಶಿನ', 'ಮೆಣಸು', 'ಎಲೆಕೋಸು', 'ಹೂಕೋಸು',
            'ಬದನೆಕಾಯಿ', 'ಬೆಂಡೆಕಾಯಿ', 'ಕ್ಯಾರೆಟ್', 'ಮೂಲಂಗಿ', 'ಬೀಟ್ರೂಟ್',
            'ಮಾವಿನಹಣ್ಣು', 'ಬಾಳೆಹಣ್ಣು', 'ಪಪ್ಪಾಯ', 'ಪೇರಲ', 'ಕಿತ್ತಳೆ', 'ನಿಂಬೆ'
        ],
        te: [
            'గోధుమ', 'బియ్యం', 'వరి', 'మొక్కజొన్న', 'పత్తి', 'చెరకు', 'జనపనార',
            'పప్పు', 'శనగ', 'కందిపప్పు', 'మినుము', 'పెసలు', 'సోయా', 'వేరుశనగ',
            'ఆవాలు', 'సూర్యకాంతి', 'నువ్వులు', 'బంగాళాదుంప', 'టమాటా', 'ఉల్లిపాయ',
            'వెల్లుల్లి', 'అల్లం', 'పసుపు', 'మిర్చి', 'క్యాబేజీ', 'కాలీఫ్లవర్',
            'వంకాయ', 'బెండకాయ', 'క్యారెట్', 'ముల్లంగి', 'బీట్రూట్',
            'మామిడి', 'అరటి', 'బొప్పాయి', 'జామ', 'నారింజ', 'నిమ్మ'
        ]
    },

    // Units of measurement
    units: {
        en: [
            'kilogram', 'kg', 'kilo', 'gram', 'quintal', 'ton', 'tonne', 'metric ton',
            'pound', 'bag', 'sack', 'acre', 'hectare', 'bigha', 'guntha', 'cent',
            'liter', 'litre', 'milliliter', 'gallon', 'piece', 'dozen', 'bundle'
        ],
        hi: [
            'किलोग्राम', 'किलो', 'ग्राम', 'क्विंटल', 'टन', 'मीट्रिक टन',
            'पाउंड', 'बोरी', 'बैग', 'एकड़', 'हेक्टेयर', 'बीघा', 'गुंठा',
            'लीटर', 'मिलीलीटर', 'गैलन', 'पीस', 'दर्जन', 'गट्ठर'
        ],
        ta: [
            'கிலோகிராம்', 'கிலோ', 'கிராம்', 'குவிண்டால்', 'டன்', 'மெட்ரிக் டன்',
            'பவுண்டு', 'பை', 'சாக்கு', 'ஏக்கர்', 'ஹெக்டேர்', 'பீகா', 'குந்தா',
            'லிட்டர்', 'மில்லிலிட்டர்', 'கேலன்', 'துண்டு', 'டஜன்', 'கட்டு'
        ],
        ml: [
            'കിലോഗ്രാം', 'കിലോ', 'ഗ്രാം', 'ക്വിന്റൽ', 'ടൺ', 'മെട്രിക് ടൺ',
            'പൗണ്ട്', 'ബാഗ്', 'ചാക്ക്', 'ഏക്കർ', 'ഹെക്ടർ', 'ബീഘ', 'ഗുണ്ട',
            'ലിറ്റർ', 'മില്ലിലിറ്റർ', 'ഗാലൺ', 'കഷണം', 'ഡസൻ', 'കെട്ട്'
        ],
        kn: [
            'ಕಿಲೋಗ್ರಾಂ', 'ಕಿಲೋ', 'ಗ್ರಾಂ', 'ಕ್ವಿಂಟಾಲ್', 'ಟನ್', 'ಮೆಟ್ರಿಕ್ ಟನ್',
            'ಪೌಂಡ್', 'ಚೀಲ', 'ಗೋಣಿ', 'ಎಕರೆ', 'ಹೆಕ್ಟೇರ್', 'ಬೀಘಾ', 'ಗುಂಠ',
            'ಲೀಟರ್', 'ಮಿಲಿಲೀಟರ್', 'ಗ್ಯಾಲನ್', 'ತುಂಡು', 'ಡಜನ್', 'ಕಟ್ಟು'
        ],
        te: [
            'కిలోగ్రాము', 'కిలో', 'గ్రాము', 'క్వింటాల్', 'టన్ను', 'మెట్రిక్ టన్',
            'పౌండ్', 'సంచి', 'బస్తా', 'ఎకరా', 'హెక్టారు', 'బీఘా', 'గుంట',
            'లీటరు', 'మిల్లీలీటరు', 'గ్యాలన్', 'ముక్క', 'డజను', 'కట్ట'
        ]
    },

    // Actions
    actions: {
        en: [
            'plant', 'sow', 'harvest', 'reap', 'irrigate', 'water', 'spray', 'fertilize',
            'plough', 'till', 'weed', 'prune', 'trim', 'cut', 'sell', 'buy', 'list',
            'add', 'remove', 'delete', 'update', 'check', 'search', 'find', 'show'
        ],
        hi: [
            'बोना', 'रोपना', 'कटाई', 'सिंचाई', 'पानी', 'छिड़काव', 'खाद',
            'जुताई', 'निराई', 'कटाई', 'बेचना', 'खरीदना', 'सूची', 'जोड़ना',
            'हटाना', 'अपडेट', 'जांच', 'खोज', 'दिखाओ'
        ],
        ta: [
            'விதை', 'நடவு', 'அறுவடை', 'நீர்ப்பாசனம்', 'தண்ணீர்', 'தெளிப்பு', 'உரம்',
            'உழவு', 'களை', 'வெட்டு', 'விற்பனை', 'வாங்கு', 'பட்டியல்', 'சேர்',
            'நீக்கு', 'புதுப்பி', 'சரிபார்', 'தேடு', 'காட்டு'
        ],
        ml: [
            'നടുക', 'വിതയ്ക്കുക', 'വിളവെടുപ്പ്', 'ജലസേചനം', 'വെള്ളം', 'തളിക്കുക', 'വളം',
            'ഉഴുക', 'കളപറിക്കുക', 'വെട്ടുക', 'വിൽക്കുക', 'വാങ്ങുക', 'പട്ടിക', 'ചേർക്കുക',
            'നീക്കം ചെയ്യുക', 'അപ്ഡേറ്റ്', 'പരിശോധിക്കുക', 'തിരയുക', 'കാണിക്കുക'
        ],
        kn: [
            'ಬಿತ್ತು', 'ನೆಡು', 'ಕೊಯ್ಲು', 'ನೀರಾವರಿ', 'ನೀರು', 'ಸಿಂಪಡಿಸು', 'ಗೊಬ್ಬರ',
            'ಉಳು', 'ಕಳೆ', 'ಕತ್ತರಿಸು', 'ಮಾರು', 'ಖರೀದಿಸು', 'ಪಟ್ಟಿ', 'ಸೇರಿಸು',
            'ತೆಗೆದುಹಾಕು', 'ನವೀಕರಿಸು', 'ಪರಿಶೀಲಿಸು', 'ಹುಡುಕು', 'ತೋರಿಸು'
        ],
        te: [
            'విత్తు', 'నాటు', 'కోత', 'నీటిపారుదల', 'నీరు', 'చల్లు', 'ఎరువు',
            'దున్ను', 'కలుపు', 'కోయు', 'అమ్ము', 'కొను', 'జాబితా', 'జోడించు',
            'తొలగించు', 'నవీకరించు', 'తనిఖీ', 'వెతుకు', 'చూపించు'
        ]
    },

    // Common phrases
    phrases: {
        en: [
            'what is the price', 'how much', 'check price', 'market rate', 'current price',
            'add crop', 'new crop', 'create listing', 'sell crop', 'buy crop',
            'search for', 'find buyers', 'find sellers', 'show inventory', 'my stock',
            'weather forecast', 'will it rain', 'temperature', 'humidity',
            'go to', 'navigate to', 'open', 'show me', 'take me to'
        ],
        hi: [
            'कीमत क्या है', 'कितना', 'कीमत जांचें', 'बाजार भाव', 'वर्तमान कीमत',
            'फसल जोड़ें', 'नई फसल', 'सूची बनाएं', 'फसल बेचें', 'फसल खरीदें',
            'खोजें', 'खरीदार खोजें', 'विक्रेता खोजें', 'इन्वेंटरी दिखाएं', 'मेरा स्टॉक',
            'मौसम पूर्वानुमान', 'बारिश होगी', 'तापमान', 'आर्द्रता',
            'जाओ', 'नेविगेट करें', 'खोलें', 'दिखाओ', 'ले जाओ'
        ],
        ta: [
            'விலை என்ன', 'எவ்வளவு', 'விலை சரிபார்', 'சந்தை விலை', 'தற்போதைய விலை',
            'பயிர் சேர்', 'புதிய பயிர்', 'பட்டியல் உருவாக்கு', 'பயிர் விற்க', 'பயிர் வாங்க',
            'தேடு', 'வாங்குபவர்களைக் கண்டறி', 'விற்பவர்களைக் கண்டறி', 'சரக்கு காட்டு', 'என் பங்கு',
            'வானிலை முன்னறிவிப்பு', 'மழை பெய்யுமா', 'வெப்பநிலை', 'ஈரப்பதம்',
            'செல்', 'வழிசெலுத்து', 'திற', 'காட்டு', 'அழைத்துச் செல்'
        ],
        ml: [
            'വില എന്താണ്', 'എത്ര', 'വില പരിശോധിക്കുക', 'മാർക്കറ്റ് നിരക്ക്', 'നിലവിലെ വില',
            'വിള ചേർക്കുക', 'പുതിയ വിള', 'ലിസ്റ്റിംഗ് സൃഷ്ടിക്കുക', 'വിള വിൽക്കുക', 'വിള വാങ്ങുക',
            'തിരയുക', 'വാങ്ങുന്നവരെ കണ്ടെത്തുക', 'വിൽക്കുന്നവരെ കണ്ടെത്തുക', 'ഇൻവെന്ററി കാണിക്കുക', 'എന്റെ സ്റ്റോക്ക്',
            'കാലാവസ്ഥ പ്രവചനം', 'മഴ പെയ്യുമോ', 'താപനില', 'ആർദ്രത',
            'പോകുക', 'നാവിഗേറ്റ് ചെയ്യുക', 'തുറക്കുക', 'കാണിക്കുക', 'കൊണ്ടുപോകുക'
        ],
        kn: [
            'ಬೆಲೆ ಏನು', 'ಎಷ್ಟು', 'ಬೆಲೆ ಪರಿಶೀಲಿಸಿ', 'ಮಾರುಕಟ್ಟೆ ದರ', 'ಪ್ರಸ್ತುತ ಬೆಲೆ',
            'ಬೆಳೆ ಸೇರಿಸಿ', 'ಹೊಸ ಬೆಳೆ', 'ಪಟ್ಟಿ ರಚಿಸಿ', 'ಬೆಳೆ ಮಾರಾಟ', 'ಬೆಳೆ ಖರೀದಿ',
            'ಹುಡುಕಿ', 'ಖರೀದಿದಾರರನ್ನು ಹುಡುಕಿ', 'ಮಾರಾಟಗಾರರನ್ನು ಹುಡುಕಿ', 'ದಾಸ್ತಾನು ತೋರಿಸಿ', 'ನನ್ನ ಸ್ಟಾಕ್',
            'ಹವಾಮಾನ ಮುನ್ಸೂಚನೆ', 'ಮಳೆ ಬರುತ್ತದೆಯೇ', 'ತಾಪಮಾನ', 'ಆರ್ದ್ರತೆ',
            'ಹೋಗಿ', 'ನ್ಯಾವಿಗೇಟ್ ಮಾಡಿ', 'ತೆರೆಯಿರಿ', 'ತೋರಿಸಿ', 'ಕರೆದುಕೊಂಡು ಹೋಗಿ'
        ],
        te: [
            'ధర ఏమిటి', 'ఎంత', 'ధర తనిఖీ', 'మార్కెట్ రేటు', 'ప్రస్తుత ధర',
            'పంట జోడించు', 'కొత్త పంట', 'జాబితా సృష్టించు', 'పంట అమ్ము', 'పంట కొను',
            'వెతుకు', 'కొనుగోలుదారులను కనుగొను', 'అమ్మకందారులను కనుగొను', 'ఇన్వెంటరీ చూపించు', 'నా స్టాక్',
            'వాతావరణ సూచన', 'వర్షం పడుతుందా', 'ఉష్ణోగ్రత', 'తేమ',
            'వెళ్ళు', 'నావిగేట్ చేయి', 'తెరువు', 'చూపించు', 'తీసుకెళ్ళు'
        ]
    }
};

/**
 * Fuzzy matching using Levenshtein distance
 * @param {string} str1 - First string
 * @param {string} str2 - Second string
 * @returns {number} - Distance between strings
 */
export const levenshteinDistance = (str1, str2) => {
    const len1 = str1.length;
    const len2 = str2.length;
    const matrix = [];

    for (let i = 0; i <= len1; i++) {
        matrix[i] = [i];
    }

    for (let j = 0; j <= len2; j++) {
        matrix[0][j] = j;
    }

    for (let i = 1; i <= len1; i++) {
        for (let j = 1; j <= len2; j++) {
            const cost = str1[i - 1] === str2[j - 1] ? 0 : 1;
            matrix[i][j] = Math.min(
                matrix[i - 1][j] + 1,
                matrix[i][j - 1] + 1,
                matrix[i - 1][j - 1] + cost
            );
        }
    }

    return matrix[len1][len2];
};

/**
 * Find best match for agricultural term
 * @param {string} input - User input
 * @param {string} language - Current language code
 * @param {number} threshold - Maximum distance for match (default: 3)
 * @returns {object|null} - { term, category, confidence } or null
 */
export const matchAgricultureTerm = (input, language = 'en', threshold = 3) => {
    const inputLower = input.toLowerCase().trim();
    let bestMatch = null;
    let bestDistance = Infinity;
    let bestCategory = null;

    // Search through all categories
    for (const [category, terms] of Object.entries(agriculturalVocabulary)) {
        const languageTerms = terms[language] || terms.en;

        for (const term of languageTerms) {
            const distance = levenshteinDistance(inputLower, term.toLowerCase());

            // Exact match
            if (distance === 0) {
                return { term, category, confidence: 1.0 };
            }

            // Fuzzy match
            if (distance < bestDistance && distance <= threshold) {
                bestDistance = distance;
                bestMatch = term;
                bestCategory = category;
            }
        }
    }

    if (bestMatch) {
        // Calculate confidence based on distance
        const confidence = 1 - (bestDistance / threshold);
        return { term: bestMatch, category: bestCategory, confidence };
    }

    return null;
};

/**
 * Extract agricultural terms from text
 * @param {string} text - Input text
 * @param {string} language - Current language code
 * @returns {Array} - Array of matched terms
 */
export const extractAgricultureTerms = (text, language = 'en') => {
    const words = text.toLowerCase().split(/\s+/);
    const matches = [];

    for (const word of words) {
        const match = matchAgricultureTerm(word, language);
        if (match && match.confidence > 0.6) {
            matches.push(match);
        }
    }

    return matches;
};

export default agriculturalVocabulary;
